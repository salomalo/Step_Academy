<?xml version="1.0" encoding="windows-1251" ?>
<?xml:stylesheet type="text/xsl" href="common/layout.xsl" ?>

<lesson title="Урок №2" next="section06.xml" prev="section05.xml" summ="1">
<h2>Лесенка if - else if</h2>
<p>Из прошлого раздела урока вы узнали о существовании условных операторов. Теперь неплохо было бы получить информацию об особенностях их работы. </p>
<p>Предположим нам необходимо написать программу для учета денежной скидки, в зависимости от суммы. Например, если покупатель приобрел товара на сумму больше 100 грн., он получает скидку 5%. Больше 500грн. - 10%, и, наконец больше 1000 грн. - 25%. приложение должно выдать сумму, которую должен уплатить покупатель, если последний получил скидку. Теперь необходимо найти оптимальный вариант  ррешения задачи.</p>
<h3>Вариант решения № 1.</h3>
<example>
# include &lt;iostream&gt;
using namespace std;
void main(){
	// обявляется переменная,для хранения первоначальной суммы
	int summa;

	// запрос на ввод суммы с клавиатуры
	cout&lt;&lt;"Enter item of summa:\n";
	cin&gt;&gt;summa;

	if(summa&gt;100){ // если сумма больше 100 грн., скидка 5%
		cout&lt;&lt;"You have 5% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*5&lt;&lt;"\n";
	}
	if(summa&gt;500){ // если сумма больше 500 грн., скидка 10%
		cout&lt;&lt;"You have 10% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*10&lt;&lt;"\n";
	}
	if(summa&gt;1000){ // если сумма больше 1000 грн., скидка 25%
		cout&lt;&lt;"You have 25% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*25&lt;&lt;"\n";
	}
	else{ // в противном случае, скидки нет
		cout&lt;&lt;"You have not discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa&lt;&lt;"\n";
	}

}
</example>
<p>Данный пример, на первый взгляд у начинающего программиста не вызывает нареканий, однако, давайте рассмотрим ситуацию, в которой программа отработает весьма некорректно. Сумма, введенная с клавиатуры, равна 5000. Эта цифра привышает 1000, следовательно, мы должны получить 25% скидку. Однако, произойдет совсем другое.</p>
<p>1. Каждый оператор if является самостоятельным и независит от других if, следовательно, вне зависимости от того, какое из if выполнится, проверка условия все равно будет осуществляться для всех операторов.</p>
<p>2. Сначала, осуществится проверка условия <b>if(summa&gt;100)</b>. 5000, естественно больше 100, условие истинно и выполняется тело if. На экране мы получаем :
<example>You have 5% discount!!!
You must pay - 4750</example></p>
<p>3. Однако, на этом программа не остановится - далее будет проанализированно условие <b>if(summa&gt;500)</b>. 5000 больше 500, условие снова истинно и выполняется тело if. На экране мы получаем :
<example>You have 10% discount!!!
You must pay - 4500</example></p>
<p>4. Ну и, наконец программа проверит условие <b>if(summa&gt;1000)</b>, которое тоже окажется истинным, так как 5000 больше 1000. И, действие связанное с if, выполняется и теперь. На экран выводится: 
<example>You have 25% discount!!!
You must pay - 3750</example></p>
<p>Таким образом, вместо одной информационной надписи, мы получаем три. Такое решение задачи является нерентабельным. Попробуем оптимизировать его:</p>
<h3>Вариант решения № 2.</h3>
<example>
# include &lt;iostream&gt;
using namespace std;
void main(){
	// обявляется переменная,для хранения первоначальной суммы
	int summa;

	// запрос на ввод суммы с клавиатуры
	cout&lt;&lt;"Enter item of summa:\n";
	cin&gt;&gt;summa;

	// если сумма в диапазоне от 100 грн. до 500 грн., скидка 5%
	if(summa&gt;100&amp;&amp;summa&lt;=500){ 
		cout&lt;&lt;"You have 5% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*5&lt;&lt;"\n";
	}
	// если сумма в диапазоне от 500 грн. до 1000 грн., скидка 5%
	if(summa&gt;500&amp;&amp;summa&lt;=1000){ 
		cout&lt;&lt;"You have 10% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*10&lt;&lt;"\n";
	}
	if(summa&gt;1000){ // если сумма больше 1000 грн., скидка 25%
		cout&lt;&lt;"You have 25% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*25&lt;&lt;"\n";
	}
	else{ // в противном случае, скидки нет
		cout&lt;&lt;"You have not discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa&lt;&lt;"\n";
	}

}
</example>
<p>Для начала, снова представим, что пользователь ввел сумму размером 5000 грн.</p>
<p>1. Сначала, осуществится проверка условия <b>if(summa&gt;100&amp;&amp;summa&lt;=500)</b>. 5000 не входит в заданный диапазон, условие ложно и тело if выполнятся не будет.</p>
<p>2. Далее будет проанализированно условие <b>if(summa&gt;500&amp;&amp;summa&lt;=1000)</b>. 5000 не входит и в этот диапазон, условие снова ложно и тело if выполнятся не будет.</p>
<p>3. И, наконец программа проверит условие <b>if(summa&gt;1000)</b>, которое окажется истинным, так как 5000 больше 1000. И, действие связанное с if, выполнится. На экран выводится: 
<example>You have 25% discount!!!
You must pay - 3750</example></p>
<p>Казалось бы на этом можно остановиться, но давайте-ка проверим еще один вариант. Например, пользователь вводит значение 600. И, на экране появляются следующие данные:<example>Enter item of summa:
600
You have 10% discount!!!
You must pay - 540
You have not discount!!!
You must pay - 600
Press any key to continue</example></p>
<p>Такой поворот событий объясняется легко:</p>
<p>1. Сначала, осуществится проверка условия <b>if(summa&gt;100&amp;&amp;summa&lt;=500)</b>. 5000 не входит в заданный диапазон, условие ложно и тело if выполнятся не будет.</p>
<p>2. Далее будет проанализированно условие <b>if(summa&gt;500&amp;&amp;summa&lt;=1000)</b>. 5000 входит в этот диапазон, условие истинно и тело if выполнится, на экран выведется сообщение о 10% скидке.</p>
<p>3. И, наконец программа проверит условие <b>if(summa&gt;1000)</b>, которое окажется ложным. Действие связанное с if выполняться не будет, но у данного самостоятельного оператора if, есть собственный else, который отработает в нашем случае. На экран выводится сообщение об отсутствии скидки.</p>
<p> Вывод: во-первых, мы выяснили, что оператор else относится только к последнему if. Во-вторых, пришли к тому, что и данная реализация программы нас не устраивает. Рассмотрим еще один пример решения:</p>
<h3>Вариант решения № 3.</h3>
<example>
# include &lt;iostream&gt;
using namespace std;
void main(){
	// обявляется переменная,для хранения первоначальной суммы
	int summa;

	// запрос на ввод суммы с клавиатуры
	cout&lt;&lt;"Enter item of summa:\n";
	cin&gt;&gt;summa;

	if(summa&gt;1000){ // если сумма больше 1000 грн., скидка 25%
		cout&lt;&lt;"You have 25% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*25&lt;&lt;"\n";
	}
	else{ // если сумма не больше 1000 грн. продолжаем анализ
		if(summa&gt;500){ // если сумма больше 500 грн., скидка 10%
			cout&lt;&lt;"You have 10% discount!!!\n";
			cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*10&lt;&lt;"\n";
		}
		else{ // если сумма не больше 500 грн. продолжаем анализ
			if(summa&gt;100){ // если сумма больше 100 грн., скидка 5%
				cout&lt;&lt;"You have 5% discount!!!\n";
				cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*5&lt;&lt;"\n";
			}
			else{  // если сумма не больше 100 грн. скидки нет
				cout&lt;&lt;"You have not discount!!!\n";
				cout&lt;&lt;"You must pay - "&lt;&lt;summa&lt;&lt;"\n";
			}
		}
	}

}
</example>
<p>Внимательно проанализировав данный пример, вы заметите, что каждый следующий if, может выполниться только, в том случае, если не выполнился его "предшественник", так как находится внутри конструкции else последнего. Таким образом, мы наконец-то нашли оптимальный код реализации. Структрура, которую мы только что создали называется "Лесенка if else if", так как условия в ней располагаются в виде лестницы. Теперь, мы с вами знаем, какая это полезная конструкция. Остался последний штрих:</p>
<h3>Оптимизация кода.</h3>
<p>В предыдущем разделе урока прозвучало правило: <b>Если к блоку if или else относится только одна команда, то фигурные скобки можно не указывать.</b> Дело в том, конструкция if else считается одной цельной командной структурой. Следовательно, если внутри некоторых else нет ничего кроме вложенной конструкции, фигурные скобки таких else можно опустить:</p>
<example>
# include &lt;iostream&gt;
using namespace std;
void main(){
	// обявляется переменная,для хранения первоначальной суммы
	int summa;

	// запрос на ввод суммы с клавиатуры
	cout&lt;&lt;"Enter item of summa:\n";
	cin&gt;&gt;summa;

	if(summa&gt;1000){ // если сумма больше 1000 грн., скидка 25%
		cout&lt;&lt;"You have 25% discount!!!\n";
		cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*25&lt;&lt;"\n";
	}

	// если сумма не больше 1000 грн. продолжаем анализ
	else if(summa&gt;500){  // если сумма больше 500 грн., скидка 10%
			cout&lt;&lt;"You have 10% discount!!!\n";
			cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*10&lt;&lt;"\n";
	}

	 // если сумма не больше 500 грн. продолжаем анализ
	else if(summa&gt;100){ // если сумма больше 100 грн., скидка 5%
				cout&lt;&lt;"You have 5% discount!!!\n";
				cout&lt;&lt;"You must pay - "&lt;&lt;summa-summa/100*5&lt;&lt;"\n";
	}
	else{  // если сумма не больше 100 грн. скидки нет
				cout&lt;&lt;"You have not discount!!!\n";
				cout&lt;&lt;"You must pay - "&lt;&lt;summa&lt;&lt;"\n";
	}
	
	

}
</example>
<p>Вот и всё!!! Задача решена. Мы получили цельную конструкцию множественного выбора, состоящую из отдельных, взаимозависимых условий.</p>
<p>Теперь можно переходить к следующим разделам урока, где мы с вами подробно рассмотрим еще несколько примеров использования if else.</p>
</lesson>
